!function(){"use strict";function t(t,e){return{x:t||0,y:e||0}}t.copy=function(t,e){return t.x=e.x,t.y=e.y,t},t.set=function(t,e,s){return t.x=e,t.y=s,t},t.add=function(t,e,s){return t.x=e.x+s.x,t.y=e.y+s.y,t},t.sub=function(t,e,s){return t.x=e.x-s.x,t.y=e.y-s.y,t},t.scale=function(t,e,s){return t.x=e.x*s,t.y=e.y*s,t},t.distance=function(t,e){var s=t.x-e.x,n=t.y-e.y;return Math.sqrt(s*s+n*n)},t.distance2=function(t,e){var s=t.x-e.x,n=t.y-e.y;return s*s+n*n},t.magnitude=function(t){var e=t.x,s=t.y;return Math.sqrt(e*e+s*s)},t.normalize=function(t,e){var s=e.x,n=e.y,o=s*s+n*n;return o>0&&(o=1/Math.sqrt(o),t.x=e.x*o,t.y=e.y*o),t};var e=t;class s{constructor(t){this.kinds=t,this.selectionHash=s.hash(this.kinds),this.entities=new Set}insert(t){this.entities.add(t)}maybeInsert(t,e){const n=s.hash(e.map(t=>t.k));-1===this.selectionHash.indexOf(n)||this.entities.has(t)||this.entities.add(t)}maybeRemove(t,e){-1!==s.hash(e.map(t=>t.k)).indexOf(this.selectionHash)&&this.entities.has(t)&&this.entities.delete(t)}static hash(t){return t.sort().join("|")}}let n=0,o=[];console.log("214fcfc8c74f8dee.png");const i=new class{constructor(){this.lastId=0,this.entities=new Map,this.selections=new Map,this.destroyNext=new Set}entity(t){const e=this.lastId++;return this.entities.set(e,t),this.selections.forEach(s=>s.maybeInsert(e,t)),e}destroy(t){this.destroyNext.add(t)}flushDestruction(){this.destroyNext.forEach(t=>{if(!this.entities.has(t))return;const e=this.entities.get(t);this.entities.delete(t),this.selections.forEach(s=>s.maybeRemove(t,e))})}select(t){const e=s.hash(t);if(this.selections.has(e))return this.selections.get(e).entities;const n=new s(t);return this.selections.set(n.selectionHash,n),this.entities.forEach((e,s)=>{let o=!0;for(let s=1;s<t.length;s++){const n=t[s];e.find(t=>t.k===n)||(o=!1)}o&&n.insert(s)}),n.entities}data(t,e){const s=this.entities.get(t);if(!s)throw new Error(`Entity(${t}) not found!`);const n=s.find(t=>t.k===e);if(!n)throw new Error(`Data(${e}) not found for Entity(${t})!`);return n}},c=i.entity([{k:"v-movement",cpos:{x:0,y:0},ppos:{x:0,y:0},acel:{x:10,y:0}},{k:"draw-console"}]),r=[],a=[];var h,l;a.push(function(t,s){t.select(["v-movement"]).forEach(n=>{const o=t.data(n,"v-movement");!function(t,s){t.cpos.x+=t.acel.x*s*s*.001,t.cpos.y+=t.acel.y*s*s*.001,e.set(t.acel,0,0)}(o,s),function(t){var s=2*t.cpos.x-t.ppos.x,n=2*t.cpos.y-t.ppos.y;e.set(t.ppos,t.cpos.x,t.cpos.y),e.set(t.cpos,s,n)}(o)})}),r.push(function(t,e){t.select(["v-movement","draw-console"]).forEach(s=>{const n=t.data(s,"v-movement");console.log("x",n.ppos.x+(n.cpos.x-n.ppos.x)*e),console.log("y",n.ppos.y+(n.cpos.y-n.ppos.y)*e)})}),h=(t,e)=>{i.destroy(c),console.log("marked entity for destruction",c)},l=3500,o.push({id:++n,action:h,delay:l,age:0});const{stop:u}=(({drawTime:t,updateTime:e,draw:s,update:n,panicAt:o=10,onPanic:i=(()=>{}),onFPS:c=(()=>{})})=>{const r=window.performance,a=t,h=e,l=r.now.bind(r),u=window.requestAnimationFrame.bind(window);let d=0,y=null,f=l(),p=l(),x=0,m=0;!function t(e){y=u(t);const r=e-f;f=e;let w=(d+=r)-a>=0,v=Math.floor(d/h);if(v>=o)return d=0,f=l(),void i();for(;v-- >0;)d-=h,n(h);w&&s(d/a),x+=1,p+1e3<=e&&(m=.25*x+.75*m,x=0,p=e,c(m))}(l());return{stop:()=>{y&&cancelAnimationFrame(y)}}})({drawTime:1e3/60,updateTime:1e3/30,update:t=>{((t=1)=>{o.slice().forEach((e,s)=>{e.age+=t,e.age>=e.delay&&(o.splice(s,1),e.action(e.delay,e.age))})})(t),a.forEach(e=>e(i,t)),i.flushDestruction()},draw:t=>{r.forEach(e=>e(i,t))},onPanic:()=>console.log("panic!"),onFPS:t=>console.log(t,"fps")})}();